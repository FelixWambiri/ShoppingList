<!DOCTYPE html>
{% extends "base.html" %}

{% block head %}
{{ super() }}

{% endblock %}

<body>
{% block page_content %}

<form method="post">
    <div class="items-container">
        <button type="submit" class="new-btn"><a href="{{ url_for('create_shopping_lst') }}">Create A ShoppingList</a>
        </button>
        <div class="form-header">
            <h2 class="title">Awesome ShoppingList App</h2>
            <p style="color: #2196F3">Loggedin As {{ current_user.name }} </p>
        </div>

        <div class="card">
            {% if current_user.get_num_of_shopping_lists() > 0 %}
            {% for shoppinglist_name, shopping_list in current_user.shopping_lists.items() %}

            <form method="post">
                <div class="form-header">
                    <h4 class="title"> {{ shoppinglist_name }} </h4>
                </div>
                <div class="form-body">
                    <ol>
                        {% if shopping_list.get_categories() > 0 %}
                        {% for key, cat in shopping_list.categories.items() %}
                        <ul>

                            <strong>{{ key }}</strong>
                            {% for item_name, item in cat.items() %}
                            <li>{{ item.quantity }} {{ item.name }}(s)
                                Costing Sh {{ item.price }} Each
                                <button style="height:20px;width:50px;margin-bottom:10px" type="button"
                                        class="btn btn-info btn-xs"><a href="{{ url_for('update_item',shopping_list_name=shoppinglist_name,
                                         name=item.name, price=item.price, quantity=item.quantity, category=key) }}">
                                    Update</a>
                                </button>
                                <button style="height:20px;width:50px;margin-bottom:10px" type="button"
                                        class="btn btn-danger btn-xs">Delete
                                </button>
                            </li>
                            {% endfor %}

                        </ul>
                        {% endfor %}
                        {% else %}
                        <ul>You Currently Have no items In your shopping list</ul>
                        {% endif %}
                    </ol>

                    <!-- Buttons -->
                    <button type="submit" class="view-btn">

                        <a href="{{ url_for('add_item',
                        shopping_list_name=current_user.get_shopping_lst(shoppinglist_name).name) }}">Update</a>

                    </button>
                    <button type="submit" class="deletebtn">
                        <a href="{{ url_for('delete_shopping_list',
                        shopping_list_name=current_user.get_shopping_lst(shoppinglist_name).name) }}">Delete</a>
                    </button>
                    <button type="submit" class="updatebtn">
                        <a href="{{ url_for('add_item',
                        shopping_list_name=current_user.get_shopping_lst(shoppinglist_name).name) }}">Add Item</a>
                    </button>
                    <!-- End Buttons -->
                </div>
            </form>
            {% endfor %}
            {% else %}
            <ul>You Currently Do not have any Shopping List</ul>
            {% endif%}
        </div>
    </div>
</form>
{% endblock %}
</body>
</html>